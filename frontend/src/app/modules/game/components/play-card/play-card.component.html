<div class="flip-card">

    <ng-container *ngFor="let card of cards | async; let currentIndex = index;">
        <div class="flip-card-inner" [class.flipped]="showAnswer && currentIndex === activeIndex"
             *ngIf="currentIndex === activeIndex || currentIndex === activeIndex + 1"
             [class.anim]="currentIndex === activeIndex + 1">

            <div class="flip-card-front">
                <div class="flip-card-content">
                    <img *ngIf="card.question.image" [src]="API_IMAGE_SRC + card.question.image" alt="Question image"
                         width="480" height="480">
                    <p *ngIf="card.question.text">{{card.question.text}}</p>
                </div>
                <div class="flip-card-footer">
                    <button class="flip-card-button" (click)="onToggleAnswer()">Voir la réponse</button>
                </div>
            </div>

            <div class="flip-card-back">
                <div class="flip-card-content">
                    <img *ngIf="card.question.answer.image" [src]="API_IMAGE_SRC + card.question.answer.image"
                         alt="Question image"
                         width="480" height="480">
                    <p *ngIf="card.question.answer.text">{{card.question.answer.text}}</p>
                </div>
                <div class="flip-card-footer">
                    <div class="buttons-container">
                        <button mat-icon-button class="link red" (click)="onSubmitCard(2)">
                            <mat-icon>thumb_down</mat-icon>
                        </button>

                        <button mat-icon-button class="link yellow" (click)="onSubmitCard(0)">
                            <mat-icon>thumbs_up_down</mat-icon>
                        </button>

                        <button mat-icon-button class="link green" (click)="onSubmitCard(-1)">
                            <mat-icon>thumb_up</mat-icon>
                        </button>
                    </div>

                    <button class="flip-card-button" (click)="onToggleAnswer()">Voir la réponse</button>
                </div>
            </div>
        </div>

    </ng-container>
</div>
